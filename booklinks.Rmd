---
title: "Practical R for Mass Communications & Journalism Links"
author: "Sharon Machlis"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Chapter 2

### Additional resources

* **My Computerworld Beginner's Guide to R.** Available on the Computerworld website at [http://cwrld.us/IntroToR](http://cwrld.us/IntroToR) or as a PDF download at [http://cwrld.us/RGuidePDF](http://cwrld.us/RGuidePDF) (free registration required for the PDF).

* **RStudio Tips on Twitter** Follow the account @rstudiotips. You can scan prior tips at [https://twitter.com/rstudiotips](https://twitter.com/rstudiotips).

* **RStudio IDE Easy Tricks you Might've Missed.** Some useful tips from RStudio at [http://bit.ly/RStudioMoreTips](http://bit.ly/RStudioMoreTips)


## Chapter 3

Run a remote script to make an interactive map: <br /> [https://raw.githubusercontent.com/smach/R4JournalismBook/master/03_map.R](https://raw.githubusercontent.com/smach/R4JournalismBook/master/03_map.R)

Bonus map: Mapping income data: <br />
[https://raw.githubusercontent.com/smach/R4JournalismBook/master/03_manhattan_income_map.R](https://raw.githubusercontent.com/smach/R4JournalismBook/master/03_manhattan_income_map.R)

## Chapter 4

Boston snowfall data: <br />
[https://raw.githubusercontent.com/smach/NICAR15data/master/BostonWinterSnowfalls.csv](https://raw.githubusercontent.com/smach/NICAR15data/master/BostonWinterSnowfalls.csv)

Boston zip code file: <br />
[https://raw.githubusercontent.com/smach/R4JournalismBook/master/data/bostonzips.txt](https://raw.githubusercontent.com/smach/R4JournalismBook/master/data/bostonzips.txt)

## Chapter 5 

### Additional resources

The [dataMaid](https://github.com/ekstroem/dataMaid) package was designed to generate a printable PDF report for a data set. The report includes a statistical summary of a data frame by default, but it's also possible to add information such as where the data came from. Just be warned that generating PDFs within R can be complicated to set up, especially on Windows, requiring versions of TeX/LaTeX and pandoc to be on your local system. dataMaid's visualize() function doesn't require PDF-creating capabilities, though. Blog post with more dataMaid details: [http://sandsynligvis.dk/articles/18/codebook.html](http://sandsynligvis.dk/articles/18/codebook.html)

## Chapter 6
Tian Zheng's R Colors PDF <br />
[http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf](http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf)

### Additional resources

**RStudio's ggplot2 cheat sheet.** Download the 2-page PDF at [https://www.rstudio.com/wp-content/uploads/2016/11/ggplot2-cheatsheet-2.1.pdf](https://www.rstudio.com/wp-content/uploads/2016/11/ggplot2-cheatsheet-2.1.pdf).
	
**Computerworld's searchable, sortable table of ggplot2 commands.** I wrote this to make it searchable by task instead of command. Find it at [http://cwrld.us/ggplot2ChtSht](http://cwrld.us/ggplot2ChtSht) (there's also a link to some downloadable code snippets).

**R Graph Catalog.** A searchable catalog of different ggplot2 visualistions with downloadable sample code, maintained in part by RStudio's Jenny Bryan. [http://shinyapps.stat.ubc.ca/r-graph-catalog/](http://shinyapps.stat.ubc.ca/r-graph-catalog/). Another option is **Top 50 ggplot2 Visualistions -- The Master List (With Full R Code).** And while these aren't actually _my_ top 50, you'll find some more samples with R code to browse. From r-statistics.co. [http://r-statistics.co/Top50-Ggplot2-Visualizations-MasterList-R-Code.html](http://r-statistics.co/Top50-Ggplot2-Visualizations-MasterList-R-Code.html).

**ggplot2 graphics companion** Some very nice examples of publication-quality visualizations by type, all with code. From Trafford Data Lab in Trafford, Greater Manchester, UK. [http://www.trafforddatalab.io/graphics_companion/](http://www.trafforddatalab.io/graphics_companion/)

**Base R graphics.** Statistician and author Nathan Yau leans toward base R graphics. He did a comparison of base vs. ggplot2 for a number of data visualizations. Although written in March 2016, it should still be relevant: [https://flowingdata.com/2016/03/22/comparing-ggplot2-and-r-base-graphics/](https://flowingdata.com/2016/03/22/comparing-ggplot2-and-r-base-graphics/).

**Base R vs. ggplot2.** Two advanced R users talk about their respective viewpoints on why base R or ggplot2 is preferable. Maybe you'll be moved by one of their posts. See Why I don't use ggplot2 by Jeff Leek at Johns Hopkins University [http://simplystatistics.org/2016/02/11/why-i-dont-use-ggplot2/](http://simplystatistics.org/2016/02/11/why-i-dont-use-ggplot2/) and Why I use ggplot by Stack Overflow data scientist David Robinson at [http://varianceexplained.org/r/why-I-use-ggplot2/](http://varianceexplained.org/r/why-I-use-ggplot2/).

**Formula-based version of ggplot2.** If you like ggplot2's capabilities but find the syntax uncomfortable, the ggformula package on CRAN might be worth exploring. As the package vignette explains, it uses the syntax `gf_plottype(formula, data = mydataframe)`.  gf_plottype options are gf_point(), gf_line(), gf_bar(), gf_boxplot(), etc.; while the formula can be something like `yvaluecol ~ xvaluecol`. Install, load, and read the package vignette `vignette("ggformula",package = "ggformula")`.

## Chapter 7

Airport delay data schema<br />
[http://www.transtats.bts.gov/Fields.asp?table_id=236](http://www.transtats.bts.gov/Fields.asp?table_id=236)

### Additional resources

R educator Charlotte Wickham (Hadley's sister), who teaches statistics at Oregon State University, posted a tutorial on the purrr package at [https://github.com/cwickham/purrr-tutorial](https://github.com/cwickham/purrr-tutorial). Also see an accompanying video from the 2017 RStudio user conference at [https://www.rstudio.com/resources/videos/happy-r-users-purrr-tutorial/](https://www.rstudio.com/resources/videos/happy-r-users-purrr-tutorial/).

RStudio's Jenny Bryan posted a [Why purrr?](https://jennybc.github.io/purrr-tutorial/bk01_base-functions.html) explainer at [https://jennybc.github.io/purrr-tutorial/bk01_base-functions.html](https://jennybc.github.io/purrr-tutorial/bk01_base-functions.html).



## Chapter 9

### Additional resources

One example of a publication-quality graphic -- with code --  based on ggplot2 and geofacets: Bloomberg's visualization of enrollment in Affordable Care Act health insurance marketplaces (with some touch-ups in Adobe Illustrator). [https://www.bloomberg.com/graphics/health-insurance-marketplaces-for-2018/](https://www.bloomberg.com/graphics/health-insurance-marketplaces-for-2018/)

Len Kiefer, deputy chief economist at Freddie Mac, has done a lot of visualizing federal housing and economic data in R. He's got some interesting ideas for faceting, such as a post on visualizing housing-price trends at [http://lenkiefer.com/2017/05/18/state-hpa](http://lenkiefer.com/2017/05/18/state-hpa). Kiefer's blog home page is [lenkiefer.com](http://lenkiefer.com).

Emil Hvitfeldt has been keeping a large list of available color palettes in R. That's on GitHub at [https://github.com/EmilHvitfeldt/r-color-palettes](https://github.com/EmilHvitfeldt/r-color-palettes).

geofacet package author Ryan Hafen wrote a blog post explaining the advantages of this dataviz type, see it at [http://ryanhafen.com/blog/geofacet](http://ryanhafen.com/blog/geofacet). The package Web site is at [https://hafen.github.io/geofacet/](https://hafen.github.io/geofacet/).

## Chapter 10

Hadley Wickham's chapter on tests in his R Packages book: [http://r-pkgs.had.co.nz/tests.html](http://r-pkgs.had.co.nz/tests.html)

Data analyst Hillary Parker's popular and easy-to-follow "Writing an R Package from Scratch": [https://hilaryparker.com/2014/04/29/writing-an-r-package-from-scratch/](https://hilaryparker.com/2014/04/29/writing-an-r-package-from-scratch/)

### Additional resources

Hadley Wickham and his sister Charlotte Wickham have an interactive video course on DataCamp about writing functions: [https://www.datacamp.com/courses/writing-functions-in-r](https://www.datacamp.com/courses/writing-functions-in-r). The first part of the course is free, and covers a fair amount including scoping (understanding environments within and outside of a function). Access to the rest of the class requires a $29/month paid account.

Hadley Wickham also has a free online book about how to create R packages, at [http://r-pkgs.had.co.nz/](http://r-pkgs.had.co.nz/).

Finally, there are more compact ways to calculate "most recent Monday" than the examples I used in this chapter. This StackOverflow question has several options: [http://stackoverflow.com/questions/32763491/find-most-recent-monday-for-a-dataframe](http://stackoverflow.com/questions/32763491/find-most-recent-monday-for-a-dataframe).

## Chapter 11

Request a free U.S. Census Bureau API key at [Request a free key at [http://api.census.gov/data/key_signup.html](http://api.census.gov/data/key_signup.html).

U.S. Census Bureau TIGER shapefiles: [https://www.census.gov/geo/maps-data/data/tiger-line.html](https://www.census.gov/geo/maps-data/data/tiger-line.html). 

tigris package's GitHub repository:  [https://github.com/walkerke/tigris](https://github.com/walkerke/tigris)

More info about the tidycensus package: [https://walkerke.github.io/tidycensus/](https://walkerke.github.io/tidycensus/)

Compare US metropolitan area characteristics in R with tidycensus and tigris blog post: [https://walkerke.github.io/2017/06/comparing-metros/](https://walkerke.github.io/2017/06/comparing-metros/)

Some other good sources of shapefiles in addition to the U.S. Census Bureau:

* Global Administrative Areas [http://www.gadm.org/country](http://www.gadm.org/country) (which actually already has R SpatialPolygonsDataFrames as well as shapefiles)
* Eurostat [http://ec.europa.eu/eurostat/web/gisco/geodata/reference-data](http://ec.europa.eu/eurostat/web/gisco/geodata/reference-data)
* Statistics Canada [https://www12.statcan.gc.ca/census-recensement/2011/geo/bound-limit/bound-limit-eng.cfm](https://www12.statcan.gc.ca/census-recensement/2011/geo/bound-limit/bound-limit-eng.cfm)
* Zillow for U.S. city neighborhood boundary maps at [https://www.zillow.com/howto/api/neighborhood-boundaries.htm](https://www.zillow.com/howto/api/neighborhood-boundaries.htm) (note the license restrictions requiring credit to Zillow).

Washington Post investigative reporting unit's GitHub R code repository for a story about ahow Jared Kushner and his partners used a program meant for high-unemployment areas to build a luxury skyscraper in Jersey City, N.J. [https://github.com/wpinvestigative/kushner_eb5_census](https://github.com/wpinvestigative/kushner_eb5_census).

### Additional resources

For more examples of using the tidycensus package for U.S. Census data, try Julia Silge's post Using tidycensus and leaflet to map Census data (https://juliasilge.com/blog/using-tidycensus/)[https://juliasilge.com/blog/using-tidycensus/].

There are several other excellent mapping packages in R that you might want to investigate (I didn't have space to demo them all):

**ggplot2** added support for simple features in 2017.For exploratory analysis, creating a choropleth map is as simple as `ggplot(simpleFeaturesObject) + geom_sf(fill = ColumnName)`.

The **choroplethr** package, as the name implies, is designed to create choropleth maps. It was designed specifically to map U.S. Census data, but now handles importing shapefiles as well. [http://www.arilamstein.com/open-source/](http://www.arilamstein.com/open-source/). Creator Ari Lamstein offers a free online class on mapping Census data at his website [http://www.arilamstein.com/](http://www.arilamstein.com/). He also demos animated choropleths at [http://www.arilamstein.com/open-source/choroplethr/animated-choropleths/](http://www.arilamstein.com/open-source/choroplethr/animated-choropleths/).

The **plotly** general data visualization R package also does mapping. You can see more info at [https://plot.ly/r/choropleth-maps/](https://plot.ly/r/choropleth-maps/). Note: As of this writing, plotly's ggplotly() function won't turn a ggplot2 map object creating with geom_sf() into an interactive map, but I remain hopeful this might happen sometime in the future.

**ggmap** For more on using ggmap with ggplot2, see the GitHub repo at [https://github.com/dkahle/ggmap](https://github.com/dkahle/ggmap).

For an excellent example of geospatial analysis and housing prices, I'd suggest the Urban Spatial blog's detailed examination of San Francisco Housing prices. It was done by Ken Steif, director of the Master of Urban Spatial Analysis program at the University of Pennsylvania, and then-Masters student Simon Kassel did a  sophisticated analysis of San Francisco housing prices by neighborhood in R. [http://urbanspatialanalysis.com/dataviz-tutorial-mapping-san-francisco-home-prices-using-r/](http://urbanspatialanalysis.com/dataviz-tutorial-mapping-san-francisco-home-prices-using-r/)

Len Kiefer, Deputy Chief Economist at Freddie Mac, does a lot with mapping economic and housing data on his blog, such as the collection at [http://lenkiefer.com/2016/08/24/more-maps](http://lenkiefer.com/2016/08/24/more-maps).

For technical details on mapping in general as well as in R:

* 2-page primer on **projections and datums** from University of California, Berkeley's Geospatial Innovation Facility: [http://gif.berkeley.edu/documents/Projections_Datums.pdf](http://gif.berkeley.edu/documents/Projections_Datums.pdf).

* Melanie Fraier's 4-page overview of **Coordinate Reference Systems in R**, which include datums and projections: [https://www.nceas.ucsb.edu/~frazier/RSpatialGuides/OverviewCoordinateReferenceSystems.pdf](https://www.nceas.ucsb.edu/~frazier/RSpatialGuides/OverviewCoordinateReferenceSystems.pdf). Frazier is a scientific programmer at the National Center for Ecological Analysis and Synthesis at University of California, Santa Barbara. She also has a ggmap Cheatsheet at [https://www.nceas.ucsb.edu/~frazier/RSpatialGuides/ggmap/ggmapCheatsheet.pdf](https://www.nceas.ucsb.edu/~frazier/RSpatialGuides/ggmap/ggmapCheatsheet.pdf) and an R Meetup PowerPoint presentation on ggmap for download at [https://www.nceas.ucsb.edu/~frazier/RSpatialGuides/ggmap/QuickPointMapping.pptx](https://www.nceas.ucsb.edu/~frazier/RSpatialGuides/ggmap/QuickPointMapping.pptx
).

* And finally, if you want a thorough technical understanding of mapping in R and the sf package, watch the two-part video tutorial "Spatial data in R: new directions" by Edzer Pebesma, lead author of the sf package, from the 2017 useR! conference. You should be able to find it on the Microsoft Channel 9 video site by searching at [bit.ly/RMappingVideo](bit.ly/RMappingVideo). 

## Chapter 12

See more about the taucharts R package at [http://rpubs.com/hrbrmstr/taucharts](http://rpubs.com/hrbrmstr/taucharts).

Find out more about the highcharter R package at  [jkunst.com/highcharter](http://jkunst.com/highcharter/hchart.html). 

More information about the metricsgraphics R package is available at the package's website, [http://hrbrmstr.github.io/metricsgraphics/](http://hrbrmstr.github.io/metricsgraphics/).

To see other interactive R packages, check out the HTML widgets gallery at [http://gallery.htmlwidgets.org](http://gallery.htmlwidgets.org/).

### Additional resources

For analyzing and visualizing pre-election polling data in R, the pollstR package is an R client for the Huffington Post's Pollster API. This source has mostly data on U.S. contests, although it occasionally includes data from other major elections worldwide, such as the 2017 France presidential race.  [https://github.com/rOpenGov/pollstR](https://github.com/rOpenGov/pollstR)

Heat maps can be an interesting way to visualize changes in results over time. Peter Aldhous, a science reporter with BuzzFeed News and investigative reporting instructor at the University of California Santa Cruz, posted materials from his National Institute for Computer-Assisted Reporting training session that includes creating a heat map with ggplot2. [http://paldhous.github.io/NICAR/2017/r-analysis.html](http://paldhous.github.io/NICAR/2017/r-analysis.html)

My guide to Election Night resources for the 2016 election includes a link to compare forecasts with results, and how to use the pollstR package to pull data from the Huffington Post's Pollster API. [http://www.computerworld.com/article/3139884/data-analytics/r-resources-for-election-night.html](http://www.computerworld.com/article/3139884/data-analytics/r-resources-for-election-night.html)

Kan Nishida has a more stats-heavy example of using R to analyze election results, using techniques such as K-means clustering to see which California counties are most similar to each other based on 2016 election results. [https://blog.exploratory.io/finding-similarities-among-california-counties-based-on-2016-election-result-with-dist-mds-and-83dd7cefd408](https://blog.exploratory.io/finding-similarities-among-california-counties-based-on-2016-election-result-with-dist-mds-and-83dd7cefd408) -- or, easier to read and type, [bit.ly/Rsimilarities](bit.ly/Rsimilarities).




